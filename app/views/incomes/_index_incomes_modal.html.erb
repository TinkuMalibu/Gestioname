<div class="container" >
  <h2 class="fw-bold mt-3">Incomes Details</h2>
  <div class="data-table">
      <table class="table table-striped table-bordered" id="example">
        <thead class="thead-dark">
          <tr>
            <th scope="col" class="filterable">Item Name</th>
            <th scope="col">Amount</th>
            <th scope="col">Date</th>
            <th scope="col">Actions</th>
          </tr>
        </thead>
        <tbody>
          <% @incomes.each do |income| %>
            <tr>
              <td class="filterable" data-search="<%= income.item_name %>"><%= income.item_name %></td>
              <td>$ <%= income.amount %></td>
              <td><%= income.date %></td>
              <td><%= link_to "Edit", edit_company_income_path(@company, income.id), class:"btn btn-danger" %>
              <%= link_to income_path(income), data: {turbo_method: :delete, turbo_confirm: "Are you sure?"} do %>
                    <i class="fa-solid fa-trash"></i>
                  <% end %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    <%= link_to "Back", company_path(@company), class:"btn btn-primary" %>
    <%= link_to "New income", new_company_income_path, class:"btn btn-success" %>
  </div>
</div>

<script>
  $(document).ready(function() {
  var table = $('#example').DataTable({
    "order": [[0, "asc"]],
    "columnDefs": [
      {
        "targets": 'filterable',
        "searchable": true,
        "orderable": true
      }
    ],
    "pagingType": "full_numbers",
    "pageLength": 5,
    "lengthMenu": [5, 10, 25, 50],
    "language": {
      "search": "Filter:"
    }
  });

  table.buttons().container().appendTo('#example_wrapper .col-md-6:eq(0)');

  $("#searchBtn").on("click", function() {
    table.draw();
  });
});
</script>
